% !TEX encoding = MacKorean
\documentclass{article}

\usepackage{geometry}                % See geometry.pdf to learn the layout options. There are lots.
\usepackage{hangul}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{mathrsfs}

\geometry{a4paper}                   % ... or a4paper or a5paper or ...

\title{HW8}
\author{Kim, Seongjun}
\date{2009-20769}                                           % Activate to display a given date or no date

\begin{document}

% \maketitle

% \include{ex1}
% \include{ex2}
% \include{ex3}

\section*{Ex3. 타입기반 분석 증명 II}
\subsection*{Definition of $\sigma \vdash e \Rightarrow \texttt{error}$}
\begin{align*}
	\frac{\sigma \vdash e_1 \Rightarrow n, f1} {\sigma \vdash e_1 e_2 \Rightarrow \texttt{error}} \quad 
	\frac{\sigma \vdash e_1 \Rightarrow \texttt{error}} {\sigma \vdash e_1 e_2 \Rightarrow \texttt{error}} \quad
	\frac{\sigma \vdash e_2 \Rightarrow \texttt{error}} {\sigma \vdash e_1 e_2 \Rightarrow \texttt{error}} \\
\end{align*}

\subsection*{Proof of Subject reduction}
\textbf{Subject Reduction:} $(\Gamma \vdash e : \tau, c) \land (\sigma \models \Gamma) \land (\sigma \vdash e \Rightarrow v, f)$ 이면 $(v : \tau) \land (f \subseteq c)$ \\
\\
$\sigma \vdash e \Rightarrow v, f$의 증명에 대한 귀납법으로 진행한다.\\
\textbf{Case 1.} $e = n$인 경우: $(\Gamma \vdash n : \iota, \emptyset)$, $(\sigma \vdash n \Rightarrow n, \emptyset)$ 이므로 $n : \iota$, $\emptyset \subseteq \emptyset$이다. \\
\textbf{Case 2.} $e = x$인 경우: $(\Gamma \vdash x : \Gamma(x), \emptyset)$, $(\sigma \vdash x \Rightarrow \sigma(x), \emptyset)$이고 $\sigma \models \Gamma$이므로 $\sigma(x) : \Gamma(x)$, $\emptyset \subseteq \emptyset$이다. \\
\textbf{Case 3.} $e = \lambda_l x. e$인 경우: $(\Gamma \vdash \lambda_l x.e : \tau_1 \stackrel{c \cup \{l\}}{\to} \tau_2, \emptyset)$, $(\sigma \vdash \lambda_l x.e \Rightarrow <\lambda_l x.e, \sigma>, \emptyset)$이고 $\emptyset \subseteq \emptyset$ 이므로 $<\lambda_l x.e, \sigma> : \tau_1 \stackrel{c \cup \{l\}}{\to} \tau_2$임을 보이면 된다. 추론 규칙에 의해 $\Gamma + x : \tau_1 \vdash e : \tau_2, c$이다. $\Gamma' = \Gamma + x : \tau_1$, $\sigma' = \sigma\{x \to v'\} (v' : \tau_1)$라 하면 $\sigma' \models \Gamma'$이고 $\sigma' \vdash e \Rightarrow v, f$이다. 귀납 가정에 의해 $v : \tau_2$이고 $f \subseteq c$이다. 따라서 $v : \tau$의 정의에 따라 $<\lambda_l x.e, \sigma> : \tau_1 \stackrel{c \cup \{l\}}{\to} \tau_2$이다. \\
\textbf{Case 4.} $e = e_1 e_2$인 경우: 가정에 따라 $(\Gamma \vdash e_1 e_2 : \tau', c)$, $(\sigma \vdash e_1 e_2 \Rightarrow v', f)$이다. 그리고 추론 규칙 의해 $(\Gamma \vdash e_1 : \tau \stackrel{c_3}{\to} \tau', c_1)$, $(\Gamma \vdash e_2 : \tau, c_2)$, $(c = c_1 \cup c_2 \cup c_3)$이고 실행 의미에 의해 $(\sigma \vdash e_1 \Rightarrow <\lambda_l x.e', \sigma'>, f_1)$, $(\sigma \vdash e_2 \Rightarrow v, f_2)$, $(\sigma'\{x \mapsto v\} \vdash e' \Rightarrow v', f_3)$, $(f = f_1 \cup f_2 \cup f_3 \cup \{l\})$ 이다. 귀납 가정에 의해 $(<\lambda_l x.e', \sigma'> : \tau \stackrel{c_3}{\to} \tau')$, $(f_1 \subseteq c_1)$, $(v : \tau)$, $(f_2 \subseteq c_2)$이다. $\Gamma'' = \Gamma + x : \tau$, $\sigma'' = \sigma'\{x \to v\} (v : \tau)$라 하면 $\sigma'' \models \Gamma''$이고 $e'$에 대한 귀납 가정에 의해 $v' : \tau'$이고 $f_3 \subseteq c_3$이다. $l \in c_3$이므로 $v' : \tau'$이고 $f_1 \cup f_2 \cup f_3 \cup \{l\} \subseteq c_1 \cup c_2 \cup c_3$.
\end{document}

